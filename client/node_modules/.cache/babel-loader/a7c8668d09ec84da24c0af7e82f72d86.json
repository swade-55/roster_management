{"ast":null,"code":"var _jsxFileName = \"/home/samuelrcwade/Development/Code/Phase4/roster_management/client/src/components/AssociateCard.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { deleteWorker, updateAssociate } from '../features/workersSlice';\nimport Metric from './Metric';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AssociateCard(_ref) {\n  _s();\n  let {\n    worker\n  } = _ref;\n  const validationSchema = Yup.object({\n    firstName: Yup.string().required('Required'),\n    lastName: Yup.string().required('Required'),\n    metrics: Yup.array().of(Yup.object({\n      id: Yup.string().required('ID is required'),\n      value: Yup.number().required('Value is required').positive('Value must be positive')\n    }))\n  });\n  const dispatch = useDispatch();\n  const metricsArray = Object.entries(worker.metrics).map(_ref2 => {\n    let [key, value] = _ref2;\n    return {\n      id: key,\n      value: value\n    };\n  });\n  const formik = useFormik({\n    initialValues: {\n      firstName: worker.first_name,\n      lastName: worker.last_name,\n      metrics: metricsArray\n    },\n    validationSchema: validationSchema,\n    onSubmit: values => {\n      const updatedData = {\n        associateId: worker.id,\n        firstName: values.firstName,\n        lastName: values.lastName,\n        metrics: values.metrics\n      };\n      dispatch(updateAssociate(updatedData)).unwrap().then(response => {\n        // Assuming you want to do something on success\n      }).catch(error => {\n        console.error('Error updating associate:', error);\n      });\n    }\n  });\n  const [editMode, setEditMode] = useState(false);\n  const [firstName, setFirstName] = useState(worker.first_name);\n  const [lastName, setLastName] = useState(worker.last_name);\n  const [metrics, setMetrics] = useState(metricsArray);\n  function handleWorkerDelete() {\n    dispatch(deleteWorker(worker.id));\n  }\n  function handleUpdate() {\n    const updatedData = {\n      associateId: worker.id,\n      firstName: firstName,\n      lastName: lastName,\n      metrics: metrics\n    };\n    dispatch(updateAssociate(updatedData)).unwrap().then(response => {\n      setEditMode(false);\n    }).catch(error => {\n      console.error('Error updating associate:', error);\n    });\n  }\n  function handleMetricChange(metricId, newValue) {\n    // Map over the metrics and update the value where the id matches\n    const newMetrics = metrics.map(metric => {\n      if (metric.id === metricId) {\n        return {\n          ...metric,\n          value: parseInt(newValue, 10)\n        };\n      }\n      return metric;\n    });\n    setMetrics(newMetrics);\n  }\n  const metricInputs = metrics.map((metric, index) => /*#__PURE__*/_jsxDEV(\"input\", {\n    type: \"number\",\n    value: metric.value,\n    onChange: e => handleMetricChange(metric.id, e.target.value)\n  }, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"ui card\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formik.handleSubmit,\n      className: \"ui form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"field\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"firstName\",\n          children: \"First Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"firstName\",\n          name: \"firstName\",\n          type: \"text\",\n          onChange: formik.handleChange,\n          value: formik.values.firstName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this), formik.touched.firstName && formik.errors.firstName ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: formik.errors.firstName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"ui button primary\",\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n\n//   return (\n//     <div className=\"ui card\">\n//       <div className=\"content\">\n//         {editMode ? (\n//           <div className=\"ui form\">\n//             <div className=\"field\">\n//               <label>First Name</label>\n//               <input\n//                 type=\"text\"\n//                 value={firstName}\n//                 onChange={e => setFirstName(e.target.value)}\n//               />\n//             </div>\n//             <div className=\"field\">\n//               <label>Last Name</label>\n//               <input\n//                 type=\"text\"\n//                 value={lastName}\n//                 onChange={e => setLastName(e.target.value)}\n//               />\n//             </div>\n//             <div className=\"field\">\n//               <label>Metrics</label>\n//               {metricInputs}\n//             </div>\n//             <button onClick={handleUpdate} className=\"ui button primary\">Save</button>\n//             <button onClick={() => setEditMode(false)} className=\"ui button\">Cancel</button>\n//           </div>\n//         ) : (\n//           <>\n//             <div className=\"header\">{firstName} {lastName}</div>\n//             <div className=\"meta\">{worker.job_class}</div>\n//             <div className=\"content\">\n//               <h4 className=\"ui sub header\">Metrics</h4>\n//               <div className=\"ui small feed\">\n//                 {metricsArray.map((metric, index) => (\n//                   <Metric key={index} metric={metric} />\n//                 ))}\n//               </div>\n//             </div>\n//             <button onClick={() => setEditMode(true)} className=\"ui button\">Edit</button>\n//           </>\n//         )}\n//       </div>\n//       <div className=\"extra content\">\n//         <button onClick={handleWorkerDelete} className=\"ui button\">Delete</button>\n//       </div> \n//     </div>\n//   );\n// }\n_s(AssociateCard, \"6TE4INVE12HZlCrEoyF8QTgLORE=\", false, function () {\n  return [useDispatch, useFormik];\n});\n_c = AssociateCard;\nexport default AssociateCard;\nvar _c;\n$RefreshReg$(_c, \"AssociateCard\");","map":{"version":3,"names":["React","useState","useDispatch","deleteWorker","updateAssociate","Metric","useFormik","Yup","jsxDEV","_jsxDEV","AssociateCard","_ref","_s","worker","validationSchema","object","firstName","string","required","lastName","metrics","array","of","id","value","number","positive","dispatch","metricsArray","Object","entries","map","_ref2","key","formik","initialValues","first_name","last_name","onSubmit","values","updatedData","associateId","unwrap","then","response","catch","error","console","editMode","setEditMode","setFirstName","setLastName","setMetrics","handleWorkerDelete","handleUpdate","handleMetricChange","metricId","newValue","newMetrics","metric","parseInt","metricInputs","index","type","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","className","children","handleSubmit","htmlFor","name","handleChange","touched","errors","_c","$RefreshReg$"],"sources":["/home/samuelrcwade/Development/Code/Phase4/roster_management/client/src/components/AssociateCard.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { deleteWorker, updateAssociate } from '../features/workersSlice';\nimport Metric from './Metric';\nimport { useFormik } from 'formik';\nimport * as Yup from 'yup';\n\nfunction AssociateCard({ worker }) {\n\n  const validationSchema = Yup.object({\n    firstName: Yup.string().required('Required'),\n    lastName: Yup.string().required('Required'),\n    metrics: Yup.array().of(\n      Yup.object({\n        id: Yup.string().required('ID is required'),\n        value: Yup.number().required('Value is required').positive('Value must be positive')\n      })\n    )\n  });\n  \n  \n  const dispatch = useDispatch();\n\n  const metricsArray = Object.entries(worker.metrics).map(([key, value]) => ({\n    id: key,\n    value: value\n  }));\n\n  const formik = useFormik({\n    initialValues: {\n      firstName: worker.first_name,\n      lastName: worker.last_name,\n      metrics: metricsArray,\n    },\n    validationSchema: validationSchema,\n    onSubmit: values => {\n      const updatedData = {\n        associateId: worker.id,\n        firstName: values.firstName,\n        lastName: values.lastName,\n        metrics: values.metrics,\n      };\n\n      dispatch(updateAssociate(updatedData))\n        .unwrap()\n        .then(response => {\n          // Assuming you want to do something on success\n        })\n        .catch(error => {\n          console.error('Error updating associate:', error);\n        });\n    },\n  });\n\n\n  const [editMode, setEditMode] = useState(false);\n  const [firstName, setFirstName] = useState(worker.first_name);\n  const [lastName, setLastName] = useState(worker.last_name);\n  const [metrics, setMetrics] = useState(metricsArray)\n  \n\n  function handleWorkerDelete() {\n      dispatch(deleteWorker(worker.id));\n  }\n\n  function handleUpdate() {\n    const updatedData = {\n      associateId: worker.id,\n      firstName: firstName,\n      lastName: lastName,\n      metrics: metrics \n    };\n  \n\n    dispatch(updateAssociate(updatedData))\n      .unwrap()\n      .then(response => {\n        setEditMode(false);\n      })\n      .catch(error => {\n        console.error('Error updating associate:', error);\n      });\n  }\n  \n\n  function handleMetricChange(metricId, newValue) {\n    // Map over the metrics and update the value where the id matches\n    const newMetrics = metrics.map(metric => {\n      if (metric.id === metricId) {\n        return { ...metric, value: parseInt(newValue, 10) };\n      }\n      return metric;\n    });\n    setMetrics(newMetrics);\n  }\n  \n\n\n  const metricInputs = metrics.map((metric, index) => (\n    <input\n      key={index}\n      type=\"number\"\n      value={metric.value}\n      onChange={e => handleMetricChange(metric.id, e.target.value)}\n    />\n  ));\n\n\n  return (\n    <div className=\"ui card\">\n      <form onSubmit={formik.handleSubmit} className=\"ui form\">\n        {/* Edit and view mode toggling and display omitted for brevity */}\n        <div className=\"field\">\n          <label htmlFor=\"firstName\">First Name</label>\n          <input\n            id=\"firstName\"\n            name=\"firstName\"\n            type=\"text\"\n            onChange={formik.handleChange}\n            value={formik.values.firstName}\n          />\n          {formik.touched.firstName && formik.errors.firstName ? (\n            <div>{formik.errors.firstName}</div>\n          ) : null}\n        </div>\n\n        {/* Repeat for lastName and metrics with appropriate adjustments */}\n        \n        <button type=\"submit\" className=\"ui button primary\">Save</button>\n      </form>\n    </div>\n  );\n}\n  \n\n//   return (\n//     <div className=\"ui card\">\n//       <div className=\"content\">\n//         {editMode ? (\n//           <div className=\"ui form\">\n//             <div className=\"field\">\n//               <label>First Name</label>\n//               <input\n//                 type=\"text\"\n//                 value={firstName}\n//                 onChange={e => setFirstName(e.target.value)}\n//               />\n//             </div>\n//             <div className=\"field\">\n//               <label>Last Name</label>\n//               <input\n//                 type=\"text\"\n//                 value={lastName}\n//                 onChange={e => setLastName(e.target.value)}\n//               />\n//             </div>\n//             <div className=\"field\">\n//               <label>Metrics</label>\n//               {metricInputs}\n//             </div>\n//             <button onClick={handleUpdate} className=\"ui button primary\">Save</button>\n//             <button onClick={() => setEditMode(false)} className=\"ui button\">Cancel</button>\n//           </div>\n//         ) : (\n//           <>\n//             <div className=\"header\">{firstName} {lastName}</div>\n//             <div className=\"meta\">{worker.job_class}</div>\n//             <div className=\"content\">\n//               <h4 className=\"ui sub header\">Metrics</h4>\n//               <div className=\"ui small feed\">\n//                 {metricsArray.map((metric, index) => (\n//                   <Metric key={index} metric={metric} />\n//                 ))}\n//               </div>\n//             </div>\n//             <button onClick={() => setEditMode(true)} className=\"ui button\">Edit</button>\n//           </>\n//         )}\n//       </div>\n//       <div className=\"extra content\">\n//         <button onClick={handleWorkerDelete} className=\"ui button\">Delete</button>\n//       </div> \n//     </div>\n//   );\n// }\n\nexport default AssociateCard;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}